version: '2'
plugins:
- name: ts
  wasm:
    # url: https://downloads.sqlc.dev/plugin/sqlc-gen-typescript_0.1.3.wasm
    # sha256: 287df8f6cc06377d67ad5ba02c9e0f00c585509881434d15ea8bd9fc751a9368
    url: "https://api.ridi.bike/storage/v1/object/public/dev-ci-cd-assets/sqlc-gen-typescript-with-enums-plugin-0.1.3.wasm"
    sha256: 94b6d0ee9c11a1c7dd2e87218443c770f1904632396a9675a0afbcc9dbb536a0
sql:
- schema: "supabase/migrations"
  queries:
    - "supabase/functions/trpc/queries.sql"
    - "supabase/functions/trpc/messaging.sql"
  engine: postgresql
  database:
    uri: "postgres://postgres:postgres@localhost:54322/postgres"
  codegen:
  - out: "supabase/functions/trpc/"
    plugin: ts
    options:
      runtime: node
      driver: postgres
- schema: "supabase/migrations"
  queries: "apps/ridi-router/lib/queries.sql"
  engine: postgresql
  database:
    uri: "postgres://postgres:postgres@localhost:54322/postgres"
  codegen:
  - out: "apps/ridi-router/lib/"
    plugin: ts
    options:
      runtime: node
      driver: postgres
